{"version":3,"names":["React","StyleSheet","View","Gesture","GestureDetector","Animated","runOnJS","useAnimatedStyle","useSharedValue","withTiming","ChessPiece","useChessboardProps","DialogPiece","memo","index","width","type","piece","onSelectPiece","isTapActive","colors","promotionPieceButton","gesture","Tap","onBegin","value","onTouchesUp","onFinalize","shouldCancelWhenOutside","maxDuration","rStyle","opacity","duration","position","backgroundColor","aspectRatio","borderTopLeftRadius","borderBottomLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderLeftWidth","borderTopWidth","styles","pieceContainer","create","justifyContent","alignItems","borderBottomWidth","borderColor"],"sources":["dialog-piece.tsx"],"sourcesContent":["import type { PieceType } from 'chess.js';\r\nimport React from 'react';\r\nimport { StyleSheet, View } from 'react-native';\r\nimport { Gesture, GestureDetector } from 'react-native-gesture-handler';\r\nimport Animated, {\r\n  runOnJS,\r\n  useAnimatedStyle,\r\n  useSharedValue,\r\n  withTiming,\r\n} from 'react-native-reanimated';\r\nimport type { Player } from '../../../types';\r\nimport { ChessPiece } from '../../../components/piece/visual-piece';\r\nimport { useChessboardProps } from '../../../context/props-context/hooks';\r\n\r\ntype DialogPieceProps = {\r\n  index: number;\r\n  width: number;\r\n  type: Player;\r\n  piece: PieceType;\r\n  onSelectPiece?: (piece: PieceType) => void;\r\n};\r\n\r\nconst DialogPiece: React.FC<DialogPieceProps> = React.memo(\r\n  ({ index, width, type, piece, onSelectPiece }) => {\r\n    const isTapActive = useSharedValue(false);\r\n    const {\r\n      colors: { promotionPieceButton },\r\n    } = useChessboardProps();\r\n\r\n    const gesture = Gesture.Tap()\r\n      .onBegin(() => {\r\n        isTapActive.value = true;\r\n      })\r\n      .onTouchesUp(() => {\r\n        if (onSelectPiece) runOnJS(onSelectPiece)(piece);\r\n      })\r\n      .onFinalize(() => {\r\n        isTapActive.value = false;\r\n      })\r\n      .shouldCancelWhenOutside(true)\r\n      .maxDuration(10000);\r\n\r\n    const rStyle = useAnimatedStyle(() => {\r\n      return {\r\n        opacity: withTiming(isTapActive.value ? 1 : 0, { duration: 150 }),\r\n      };\r\n    }, []);\r\n\r\n    return (\r\n      <GestureDetector gesture={gesture}>\r\n        <Animated.View>\r\n          <Animated.View\r\n            style={[\r\n              {\r\n                width,\r\n                position: 'absolute',\r\n                backgroundColor: promotionPieceButton,\r\n                aspectRatio: 1,\r\n                borderTopLeftRadius: index === 0 ? 5 : 0,\r\n                borderBottomLeftRadius: index === 1 ? 5 : 0,\r\n                borderTopRightRadius: index === 2 ? 5 : 0,\r\n                borderBottomRightRadius: index === 3 ? 5 : 0,\r\n              } as const,\r\n              rStyle,\r\n            ]}\r\n          />\r\n          <View\r\n            style={[\r\n              {\r\n                width,\r\n                borderLeftWidth: index === 3 || index === 2 ? 1 : 0,\r\n                borderTopWidth: index % 2 !== 0 ? 1 : 0,\r\n              } as const,\r\n              styles.pieceContainer,\r\n            ]}\r\n          >\r\n            <ChessPiece id={`${type}${piece}`} />\r\n          </View>\r\n        </Animated.View>\r\n      </GestureDetector>\r\n    );\r\n  }\r\n);\r\n\r\nconst styles = StyleSheet.create({\r\n  pieceContainer: {\r\n    aspectRatio: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    borderBottomWidth: 0,\r\n    borderColor: 'rgba(0,0,0,0.2)',\r\n  },\r\n});\r\n\r\nexport { DialogPiece };\r\n"],"mappings":"AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,EAAqBC,IAArB,QAAiC,cAAjC;AACA,SAASC,OAAT,EAAkBC,eAAlB,QAAyC,8BAAzC;AACA,OAAOC,QAAP,IACEC,OADF,EAEEC,gBAFF,EAGEC,cAHF,EAIEC,UAJF,QAKO,yBALP;AAOA,SAASC,UAAT,QAA2B,wCAA3B;AACA,SAASC,kBAAT,QAAmC,sCAAnC;AAUA,MAAMC,WAAuC,gBAAGZ,KAAK,CAACa,IAAN,CAC9C,QAAkD;EAAA,IAAjD;IAAEC,KAAF;IAASC,KAAT;IAAgBC,IAAhB;IAAsBC,KAAtB;IAA6BC;EAA7B,CAAiD;EAChD,MAAMC,WAAW,GAAGX,cAAc,CAAC,KAAD,CAAlC;EACA,MAAM;IACJY,MAAM,EAAE;MAAEC;IAAF;EADJ,IAEFV,kBAAkB,EAFtB;EAIA,MAAMW,OAAO,GAAGnB,OAAO,CAACoB,GAAR,GACbC,OADa,CACL,MAAM;IACbL,WAAW,CAACM,KAAZ,GAAoB,IAApB;EACD,CAHa,EAIbC,WAJa,CAID,MAAM;IACjB,IAAIR,aAAJ,EAAmBZ,OAAO,CAACY,aAAD,CAAP,CAAuBD,KAAvB;EACpB,CANa,EAObU,UAPa,CAOF,MAAM;IAChBR,WAAW,CAACM,KAAZ,GAAoB,KAApB;EACD,CATa,EAUbG,uBAVa,CAUW,IAVX,EAWbC,WAXa,CAWD,KAXC,CAAhB;EAaA,MAAMC,MAAM,GAAGvB,gBAAgB,CAAC,MAAM;IACpC,OAAO;MACLwB,OAAO,EAAEtB,UAAU,CAACU,WAAW,CAACM,KAAZ,GAAoB,CAApB,GAAwB,CAAzB,EAA4B;QAAEO,QAAQ,EAAE;MAAZ,CAA5B;IADd,CAAP;EAGD,CAJ8B,EAI5B,EAJ4B,CAA/B;EAMA,oBACE,oBAAC,eAAD;IAAiB,OAAO,EAAEV;EAA1B,gBACE,oBAAC,QAAD,CAAU,IAAV,qBACE,oBAAC,QAAD,CAAU,IAAV;IACE,KAAK,EAAE,CACL;MACEP,KADF;MAEEkB,QAAQ,EAAE,UAFZ;MAGEC,eAAe,EAAEb,oBAHnB;MAIEc,WAAW,EAAE,CAJf;MAKEC,mBAAmB,EAAEtB,KAAK,KAAK,CAAV,GAAc,CAAd,GAAkB,CALzC;MAMEuB,sBAAsB,EAAEvB,KAAK,KAAK,CAAV,GAAc,CAAd,GAAkB,CAN5C;MAOEwB,oBAAoB,EAAExB,KAAK,KAAK,CAAV,GAAc,CAAd,GAAkB,CAP1C;MAQEyB,uBAAuB,EAAEzB,KAAK,KAAK,CAAV,GAAc,CAAd,GAAkB;IAR7C,CADK,EAWLgB,MAXK;EADT,EADF,eAgBE,oBAAC,IAAD;IACE,KAAK,EAAE,CACL;MACEf,KADF;MAEEyB,eAAe,EAAE1B,KAAK,KAAK,CAAV,IAAeA,KAAK,KAAK,CAAzB,GAA6B,CAA7B,GAAiC,CAFpD;MAGE2B,cAAc,EAAE3B,KAAK,GAAG,CAAR,KAAc,CAAd,GAAkB,CAAlB,GAAsB;IAHxC,CADK,EAML4B,MAAM,CAACC,cANF;EADT,gBAUE,oBAAC,UAAD;IAAY,EAAE,EAAG,GAAE3B,IAAK,GAAEC,KAAM;EAAhC,EAVF,CAhBF,CADF,CADF;AAiCD,CA3D6C,CAAhD;AA8DA,MAAMyB,MAAM,GAAGzC,UAAU,CAAC2C,MAAX,CAAkB;EAC/BD,cAAc,EAAE;IACdR,WAAW,EAAE,CADC;IAEdU,cAAc,EAAE,QAFF;IAGdC,UAAU,EAAE,QAHE;IAIdC,iBAAiB,EAAE,CAJL;IAKdC,WAAW,EAAE;EALC;AADe,CAAlB,CAAf;AAUA,SAASpC,WAAT"}