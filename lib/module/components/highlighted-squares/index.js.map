{"version":3,"names":["React","useMemo","StyleSheet","View","useChessboardProps","useChessEngine","useReversePiecePosition","HighlightedSquare","useSquareRefs","HighlightedSquares","memo","chess","board","pieceSize","toPosition","toTranslation","refs","absoluteFillObject","map","row","y","_","x","square","translation","current","styles","highlightedSquare","width","transform","translateX","translateY","create","position","aspectRatio"],"sources":["index.tsx"],"sourcesContent":["import React, { useMemo } from 'react';\r\nimport { StyleSheet, View } from 'react-native';\r\n\r\nimport { useChessboardProps } from '../../context/props-context/hooks';\r\n\r\nimport { useChessEngine } from '../../context/chess-engine-context/hooks';\r\nimport { useReversePiecePosition } from '../../notation';\r\nimport { HighlightedSquare } from './highlighted-square';\r\nimport { useSquareRefs } from '../../context/board-refs-context/hooks';\r\n\r\nconst HighlightedSquares: React.FC = React.memo(() => {\r\n  const chess = useChessEngine();\r\n  const board = useMemo(() => chess.board(), [chess]);\r\n  const { pieceSize } = useChessboardProps();\r\n  const { toPosition, toTranslation } = useReversePiecePosition();\r\n  const refs = useSquareRefs();\r\n\r\n  return (\r\n    <View\r\n      style={{\r\n        ...StyleSheet.absoluteFillObject,\r\n      }}\r\n    >\r\n      {board.map((row, y) =>\r\n        row.map((_, x) => {\r\n          const square = toPosition({ x: x * pieceSize, y: y * pieceSize });\r\n          const translation = toTranslation(square);\r\n\r\n          return (\r\n            <HighlightedSquare\r\n              key={`${x}-${y}`}\r\n              ref={refs?.current?.[square]}\r\n              style={[\r\n                styles.highlightedSquare,\r\n                {\r\n                  width: pieceSize,\r\n                  transform: [\r\n                    { translateX: translation.x },\r\n                    { translateY: translation.y },\r\n                  ],\r\n                },\r\n              ]}\r\n            />\r\n          );\r\n        })\r\n      )}\r\n    </View>\r\n  );\r\n});\r\n\r\nconst styles = StyleSheet.create({\r\n  highlightedSquare: {\r\n    position: 'absolute',\r\n    aspectRatio: 1,\r\n  },\r\n});\r\n\r\nexport { HighlightedSquares };\r\n"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,OAAhB,QAA+B,OAA/B;AACA,SAASC,UAAT,EAAqBC,IAArB,QAAiC,cAAjC;AAEA,SAASC,kBAAT,QAAmC,mCAAnC;AAEA,SAASC,cAAT,QAA+B,0CAA/B;AACA,SAASC,uBAAT,QAAwC,gBAAxC;AACA,SAASC,iBAAT,QAAkC,sBAAlC;AACA,SAASC,aAAT,QAA8B,wCAA9B;AAEA,MAAMC,kBAA4B,gBAAGT,KAAK,CAACU,IAAN,CAAW,MAAM;EACpD,MAAMC,KAAK,GAAGN,cAAc,EAA5B;EACA,MAAMO,KAAK,GAAGX,OAAO,CAAC,MAAMU,KAAK,CAACC,KAAN,EAAP,EAAsB,CAACD,KAAD,CAAtB,CAArB;EACA,MAAM;IAAEE;EAAF,IAAgBT,kBAAkB,EAAxC;EACA,MAAM;IAAEU,UAAF;IAAcC;EAAd,IAAgCT,uBAAuB,EAA7D;EACA,MAAMU,IAAI,GAAGR,aAAa,EAA1B;EAEA,oBACE,oBAAC,IAAD;IACE,KAAK,EAAE,EACL,GAAGN,UAAU,CAACe;IADT;EADT,GAKGL,KAAK,CAACM,GAAN,CAAU,CAACC,GAAD,EAAMC,CAAN,KACTD,GAAG,CAACD,GAAJ,CAAQ,CAACG,CAAD,EAAIC,CAAJ,KAAU;IAAA;;IAChB,MAAMC,MAAM,GAAGT,UAAU,CAAC;MAAEQ,CAAC,EAAEA,CAAC,GAAGT,SAAT;MAAoBO,CAAC,EAAEA,CAAC,GAAGP;IAA3B,CAAD,CAAzB;IACA,MAAMW,WAAW,GAAGT,aAAa,CAACQ,MAAD,CAAjC;IAEA,oBACE,oBAAC,iBAAD;MACE,GAAG,EAAG,GAAED,CAAE,IAAGF,CAAE,EADjB;MAEE,GAAG,EAAEJ,IAAF,aAAEA,IAAF,wCAAEA,IAAI,CAAES,OAAR,kDAAE,cAAgBF,MAAhB,CAFP;MAGE,KAAK,EAAE,CACLG,MAAM,CAACC,iBADF,EAEL;QACEC,KAAK,EAAEf,SADT;QAEEgB,SAAS,EAAE,CACT;UAAEC,UAAU,EAAEN,WAAW,CAACF;QAA1B,CADS,EAET;UAAES,UAAU,EAAEP,WAAW,CAACJ;QAA1B,CAFS;MAFb,CAFK;IAHT,EADF;EAgBD,CApBD,CADD,CALH,CADF;AA+BD,CAtCoC,CAArC;AAwCA,MAAMM,MAAM,GAAGxB,UAAU,CAAC8B,MAAX,CAAkB;EAC/BL,iBAAiB,EAAE;IACjBM,QAAQ,EAAE,UADO;IAEjBC,WAAW,EAAE;EAFI;AADY,CAAlB,CAAf;AAOA,SAASzB,kBAAT"}