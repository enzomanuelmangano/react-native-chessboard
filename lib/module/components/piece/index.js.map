{"version":3,"names":["React","useCallback","useImperativeHandle","Gesture","GestureDetector","Animated","runOnJS","useAnimatedStyle","useDerivedValue","useSharedValue","withTiming","useChessboardProps","useBoardOperations","useBoardPromotion","usePieceRefs","useChessEngine","useReversePiecePosition","ChessPiece","Piece","memo","forwardRef","ref","id","startPosition","square","size","chess","refs","pieceEnabled","isPromoting","onSelectPiece","onMove","selectedSquare","turn","durations","move","moveDuration","gestureEnabled","gestureEnabledFromChessboardProps","value","charAt","toPosition","toTranslation","isGestureActive","offsetX","offsetY","scale","translateX","x","translateY","y","validateMove","from","to","moves","verbose","find","m","wrappedOnMoveForJSThread","moveTo","Promise","resolve","duration","isFinished","undefined","movePiece","enable","active","onStartTap","globalMoveTo","current","handleOnBegin","currentSquare","previousTappedSquare","gesture","Pan","enabled","onBegin","onStart","onUpdate","translationX","translationY","onEnd","onFinalize","style","position","opacity","zIndex","transform","underlay","translation","width","height","borderRadius","backgroundColor","prev","next"],"sources":["index.tsx"],"sourcesContent":["import type { Move, Square } from 'chess.js';\r\nimport React, { useCallback, useImperativeHandle } from 'react';\r\nimport { Gesture, GestureDetector } from 'react-native-gesture-handler';\r\nimport Animated, {\r\n  runOnJS,\r\n  useAnimatedStyle,\r\n  useDerivedValue,\r\n  useSharedValue,\r\n  withTiming,\r\n} from 'react-native-reanimated';\r\nimport { useChessboardProps } from '../../context/props-context/hooks';\r\nimport { useBoardOperations } from '../../context/board-operations-context/hooks';\r\nimport { useBoardPromotion } from '../../context/board-promotion-context/hooks';\r\nimport { usePieceRefs } from '../../context/board-refs-context/hooks';\r\nimport { useChessEngine } from '../../context/chess-engine-context/hooks';\r\nimport { useReversePiecePosition } from '../../notation';\r\nimport type { PieceType, Vector } from '../../types';\r\n\r\nimport { ChessPiece } from './visual-piece';\r\n\r\ntype PieceProps = {\r\n  id: PieceType;\r\n  startPosition: Vector;\r\n  square: Square;\r\n  size: number;\r\n};\r\n\r\nexport type ChessPieceRef = {\r\n  moveTo: (square: Square) => Promise<Move | undefined>;\r\n  enable: (activate: boolean) => void;\r\n};\r\n\r\nconst Piece = React.memo(\r\n  React.forwardRef<ChessPieceRef, PieceProps>(\r\n    ({ id, startPosition, square, size }, ref) => {\r\n      const chess = useChessEngine();\r\n      const refs = usePieceRefs();\r\n      const pieceEnabled = useSharedValue(true);\r\n      const { isPromoting } = useBoardPromotion();\r\n      const { onSelectPiece, onMove, selectedSquare, turn } =\r\n        useBoardOperations();\r\n\r\n      const {\r\n        durations: { move: moveDuration },\r\n        gestureEnabled: gestureEnabledFromChessboardProps,\r\n      } = useChessboardProps();\r\n\r\n      const gestureEnabled = useDerivedValue(\r\n        () => turn.value === id.charAt(0) && gestureEnabledFromChessboardProps,\r\n        [id, gestureEnabledFromChessboardProps]\r\n      );\r\n\r\n      const { toPosition, toTranslation } = useReversePiecePosition();\r\n\r\n      const isGestureActive = useSharedValue(false);\r\n      const offsetX = useSharedValue(0);\r\n      const offsetY = useSharedValue(0);\r\n      const scale = useSharedValue(1);\r\n\r\n      const translateX = useSharedValue(startPosition.x * size);\r\n      const translateY = useSharedValue(startPosition.y * size);\r\n\r\n      const validateMove = useCallback(\r\n        (from: Square, to: Square) => {\r\n          return chess\r\n            .moves({ verbose: true })\r\n            .find((m) => m.from === from && m.to === to);\r\n        },\r\n        [chess]\r\n      );\r\n\r\n      const wrappedOnMoveForJSThread = useCallback(\r\n        ({ move }: { move: Move }) => {\r\n          onMove(move.from, move.to);\r\n        },\r\n        [onMove]\r\n      );\r\n\r\n      const moveTo = useCallback(\r\n        (from: Square, to: Square) => {\r\n          return new Promise<Move | undefined>((resolve) => {\r\n            const move = validateMove(from, to);\r\n            const { x, y } = toTranslation(move ? move.to : from);\r\n            translateX.value = withTiming(x, { duration: moveDuration }, () => {\r\n              offsetX.value = translateX.value;\r\n            });\r\n            translateY.value = withTiming(\r\n              y,\r\n              { duration: moveDuration },\r\n              (isFinished) => {\r\n                if (!isFinished) return;\r\n                offsetY.value = translateY.value;\r\n                isGestureActive.value = false;\r\n                if (move) {\r\n                  runOnJS(wrappedOnMoveForJSThread)({ move });\r\n                  // Ideally I must call the resolve method\r\n                  // inside the \"wrappedOnMoveForJSThread\" after\r\n                  // the \"onMove\" function.\r\n                  // Unfortunately I'm not able to pass a\r\n                  // function in the RunOnJS params\r\n                  runOnJS(resolve)(move);\r\n                } else {\r\n                  runOnJS(resolve)(undefined);\r\n                }\r\n              }\r\n            );\r\n          });\r\n        },\r\n        [\r\n          isGestureActive,\r\n          moveDuration,\r\n          offsetX,\r\n          offsetY,\r\n          toTranslation,\r\n          translateX,\r\n          translateY,\r\n          validateMove,\r\n          wrappedOnMoveForJSThread,\r\n        ]\r\n      );\r\n\r\n      const movePiece = useCallback(\r\n        (to: Square) => {\r\n          const from = toPosition({ x: offsetX.value, y: offsetY.value });\r\n          moveTo(from, to);\r\n        },\r\n        [moveTo, offsetX.value, offsetY.value, toPosition]\r\n      );\r\n\r\n      useImperativeHandle(\r\n        ref,\r\n        () => {\r\n          return {\r\n            moveTo: (to: Square) => {\r\n              return moveTo(square, to);\r\n            },\r\n            enable: (active: boolean) => {\r\n              pieceEnabled.value = active;\r\n            },\r\n          };\r\n        },\r\n        [moveTo, pieceEnabled, square]\r\n      );\r\n\r\n      const onStartTap = useCallback(\r\n        // eslint-disable-next-line no-shadow\r\n        (square: Square) => {\r\n          'worklet';\r\n          if (!onSelectPiece) {\r\n            return;\r\n          }\r\n          runOnJS(onSelectPiece)(square);\r\n        },\r\n        [onSelectPiece]\r\n      );\r\n\r\n      const globalMoveTo = useCallback(\r\n        (move: Move) => {\r\n          refs?.current?.[move.from].current.moveTo?.(move.to);\r\n        },\r\n        [refs]\r\n      );\r\n\r\n      const handleOnBegin = useCallback(() => {\r\n        const currentSquare = toPosition({\r\n          x: translateX.value,\r\n          y: translateY.value,\r\n        });\r\n\r\n        const previousTappedSquare = selectedSquare.value;\r\n        const move =\r\n          previousTappedSquare &&\r\n          validateMove(previousTappedSquare, currentSquare);\r\n\r\n        if (move) {\r\n          runOnJS(globalMoveTo)(move);\r\n          return;\r\n        }\r\n        if (!gestureEnabled.value) return;\r\n        scale.value = withTiming(1.2);\r\n        onStartTap(square);\r\n      }, [\r\n        gestureEnabled.value,\r\n        globalMoveTo,\r\n        onStartTap,\r\n        scale,\r\n        selectedSquare.value,\r\n        square,\r\n        toPosition,\r\n        translateX.value,\r\n        translateY.value,\r\n        validateMove,\r\n      ]);\r\n\r\n      const gesture = Gesture.Pan()\r\n        .enabled(!isPromoting && pieceEnabled.value)\r\n        .onBegin(() => {\r\n          offsetX.value = translateX.value;\r\n          offsetY.value = translateY.value;\r\n          runOnJS(handleOnBegin)();\r\n        })\r\n        .onStart(() => {\r\n          if (!gestureEnabled.value) return;\r\n          isGestureActive.value = true;\r\n        })\r\n        .onUpdate(({ translationX, translationY }) => {\r\n          if (!gestureEnabled.value) return;\r\n          translateX.value = offsetX.value + translationX;\r\n          translateY.value = offsetY.value + translationY;\r\n        })\r\n        .onEnd(() => {\r\n          if (!gestureEnabled.value) return;\r\n          runOnJS(movePiece)(\r\n            toPosition({ x: translateX.value, y: translateY.value })\r\n          );\r\n        })\r\n        .onFinalize(() => {\r\n          scale.value = withTiming(1);\r\n        });\r\n\r\n      const style = useAnimatedStyle(() => {\r\n        return {\r\n          position: 'absolute',\r\n          opacity: withTiming(pieceEnabled.value ? 1 : 0),\r\n          zIndex: isGestureActive.value ? 100 : 10,\r\n          transform: [\r\n            { translateX: translateX.value },\r\n            { translateY: translateY.value },\r\n            { scale: scale.value },\r\n          ],\r\n        };\r\n      });\r\n\r\n      const underlay = useAnimatedStyle(() => {\r\n        const position = toPosition({\r\n          x: translateX.value,\r\n          y: translateY.value,\r\n        });\r\n        const translation = toTranslation(position);\r\n        return {\r\n          position: 'absolute',\r\n          width: size * 2,\r\n          height: size * 2,\r\n          borderRadius: size,\r\n          zIndex: 0,\r\n          backgroundColor: isGestureActive.value\r\n            ? 'rgba(0, 0, 0, 0.1)'\r\n            : 'transparent',\r\n          transform: [\r\n            { translateX: translation.x - size / 2 },\r\n            { translateY: translation.y - size / 2 },\r\n          ],\r\n        };\r\n      }, [size]);\r\n\r\n      return (\r\n        <>\r\n          <Animated.View style={underlay} />\r\n          <GestureDetector gesture={gesture}>\r\n            <Animated.View style={style}>\r\n              <ChessPiece id={id} />\r\n            </Animated.View>\r\n          </GestureDetector>\r\n        </>\r\n      );\r\n    }\r\n  ),\r\n  (prev, next) =>\r\n    prev.id === next.id &&\r\n    prev.size === next.size &&\r\n    prev.square === next.square\r\n);\r\n\r\nexport default Piece;\r\n"],"mappings":"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"}