{"version":3,"names":["DialogPiece","React","memo","index","width","type","piece","onSelectPiece","isTapActive","useSharedValue","colors","promotionPieceButton","useChessboardProps","gesture","Gesture","Tap","onBegin","value","onTouchesUp","runOnJS","onFinalize","shouldCancelWhenOutside","maxDuration","rStyle","useAnimatedStyle","opacity","withTiming","duration","position","backgroundColor","aspectRatio","borderTopLeftRadius","borderBottomLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderLeftWidth","borderTopWidth","styles","pieceContainer","StyleSheet","create","justifyContent","alignItems","borderBottomWidth","borderColor"],"sources":["dialog-piece.tsx"],"sourcesContent":["import type { PieceType } from 'chess.js';\r\nimport React from 'react';\r\nimport { StyleSheet, View } from 'react-native';\r\nimport { Gesture, GestureDetector } from 'react-native-gesture-handler';\r\nimport Animated, {\r\n  runOnJS,\r\n  useAnimatedStyle,\r\n  useSharedValue,\r\n  withTiming,\r\n} from 'react-native-reanimated';\r\nimport type { Player } from '../../../types';\r\nimport { ChessPiece } from '../../../components/piece/visual-piece';\r\nimport { useChessboardProps } from '../../../context/props-context/hooks';\r\n\r\ntype DialogPieceProps = {\r\n  index: number;\r\n  width: number;\r\n  type: Player;\r\n  piece: PieceType;\r\n  onSelectPiece?: (piece: PieceType) => void;\r\n};\r\n\r\nconst DialogPiece: React.FC<DialogPieceProps> = React.memo(\r\n  ({ index, width, type, piece, onSelectPiece }) => {\r\n    const isTapActive = useSharedValue(false);\r\n    const {\r\n      colors: { promotionPieceButton },\r\n    } = useChessboardProps();\r\n\r\n    const gesture = Gesture.Tap()\r\n      .onBegin(() => {\r\n        isTapActive.value = true;\r\n      })\r\n      .onTouchesUp(() => {\r\n        if (onSelectPiece) runOnJS(onSelectPiece)(piece);\r\n      })\r\n      .onFinalize(() => {\r\n        isTapActive.value = false;\r\n      })\r\n      .shouldCancelWhenOutside(true)\r\n      .maxDuration(10000);\r\n\r\n    const rStyle = useAnimatedStyle(() => {\r\n      return {\r\n        opacity: withTiming(isTapActive.value ? 1 : 0, { duration: 150 }),\r\n      };\r\n    }, []);\r\n\r\n    return (\r\n      <GestureDetector gesture={gesture}>\r\n        <Animated.View>\r\n          <Animated.View\r\n            style={[\r\n              {\r\n                width,\r\n                position: 'absolute',\r\n                backgroundColor: promotionPieceButton,\r\n                aspectRatio: 1,\r\n                borderTopLeftRadius: index === 0 ? 5 : 0,\r\n                borderBottomLeftRadius: index === 1 ? 5 : 0,\r\n                borderTopRightRadius: index === 2 ? 5 : 0,\r\n                borderBottomRightRadius: index === 3 ? 5 : 0,\r\n              } as const,\r\n              rStyle,\r\n            ]}\r\n          />\r\n          <View\r\n            style={[\r\n              {\r\n                width,\r\n                borderLeftWidth: index === 3 || index === 2 ? 1 : 0,\r\n                borderTopWidth: index % 2 !== 0 ? 1 : 0,\r\n              } as const,\r\n              styles.pieceContainer,\r\n            ]}\r\n          >\r\n            <ChessPiece id={`${type}${piece}`} />\r\n          </View>\r\n        </Animated.View>\r\n      </GestureDetector>\r\n    );\r\n  }\r\n);\r\n\r\nconst styles = StyleSheet.create({\r\n  pieceContainer: {\r\n    aspectRatio: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    borderBottomWidth: 0,\r\n    borderColor: 'rgba(0,0,0,0.2)',\r\n  },\r\n});\r\n\r\nexport { DialogPiece };\r\n"],"mappings":";;;;;;;AACA;;AACA;;AACA;;AACA;;AAOA;;AACA;;;;;;;;AAUA,MAAMA,WAAuC,gBAAGC,cAAA,CAAMC,IAAN,CAC9C,QAAkD;EAAA,IAAjD;IAAEC,KAAF;IAASC,KAAT;IAAgBC,IAAhB;IAAsBC,KAAtB;IAA6BC;EAA7B,CAAiD;EAChD,MAAMC,WAAW,GAAG,IAAAC,qCAAA,EAAe,KAAf,CAApB;EACA,MAAM;IACJC,MAAM,EAAE;MAAEC;IAAF;EADJ,IAEF,IAAAC,yBAAA,GAFJ;;EAIA,MAAMC,OAAO,GAAGC,kCAAA,CAAQC,GAAR,GACbC,OADa,CACL,MAAM;IACbR,WAAW,CAACS,KAAZ,GAAoB,IAApB;EACD,CAHa,EAIbC,WAJa,CAID,MAAM;IACjB,IAAIX,aAAJ,EAAmB,IAAAY,8BAAA,EAAQZ,aAAR,EAAuBD,KAAvB;EACpB,CANa,EAObc,UAPa,CAOF,MAAM;IAChBZ,WAAW,CAACS,KAAZ,GAAoB,KAApB;EACD,CATa,EAUbI,uBAVa,CAUW,IAVX,EAWbC,WAXa,CAWD,KAXC,CAAhB;;EAaA,MAAMC,MAAM,GAAG,IAAAC,uCAAA,EAAiB,MAAM;IACpC,OAAO;MACLC,OAAO,EAAE,IAAAC,iCAAA,EAAWlB,WAAW,CAACS,KAAZ,GAAoB,CAApB,GAAwB,CAAnC,EAAsC;QAAEU,QAAQ,EAAE;MAAZ,CAAtC;IADJ,CAAP;EAGD,CAJc,EAIZ,EAJY,CAAf;EAMA,oBACE,6BAAC,0CAAD;IAAiB,OAAO,EAAEd;EAA1B,gBACE,6BAAC,8BAAD,CAAU,IAAV,qBACE,6BAAC,8BAAD,CAAU,IAAV;IACE,KAAK,EAAE,CACL;MACET,KADF;MAEEwB,QAAQ,EAAE,UAFZ;MAGEC,eAAe,EAAElB,oBAHnB;MAIEmB,WAAW,EAAE,CAJf;MAKEC,mBAAmB,EAAE5B,KAAK,KAAK,CAAV,GAAc,CAAd,GAAkB,CALzC;MAME6B,sBAAsB,EAAE7B,KAAK,KAAK,CAAV,GAAc,CAAd,GAAkB,CAN5C;MAOE8B,oBAAoB,EAAE9B,KAAK,KAAK,CAAV,GAAc,CAAd,GAAkB,CAP1C;MAQE+B,uBAAuB,EAAE/B,KAAK,KAAK,CAAV,GAAc,CAAd,GAAkB;IAR7C,CADK,EAWLoB,MAXK;EADT,EADF,eAgBE,6BAAC,iBAAD;IACE,KAAK,EAAE,CACL;MACEnB,KADF;MAEE+B,eAAe,EAAEhC,KAAK,KAAK,CAAV,IAAeA,KAAK,KAAK,CAAzB,GAA6B,CAA7B,GAAiC,CAFpD;MAGEiC,cAAc,EAAEjC,KAAK,GAAG,CAAR,KAAc,CAAd,GAAkB,CAAlB,GAAsB;IAHxC,CADK,EAMLkC,MAAM,CAACC,cANF;EADT,gBAUE,6BAAC,uBAAD;IAAY,EAAE,EAAG,GAAEjC,IAAK,GAAEC,KAAM;EAAhC,EAVF,CAhBF,CADF,CADF;AAiCD,CA3D6C,CAAhD;;;;AA8DA,MAAM+B,MAAM,GAAGE,uBAAA,CAAWC,MAAX,CAAkB;EAC/BF,cAAc,EAAE;IACdR,WAAW,EAAE,CADC;IAEdW,cAAc,EAAE,QAFF;IAGdC,UAAU,EAAE,QAHE;IAIdC,iBAAiB,EAAE,CAJL;IAKdC,WAAW,EAAE;EALC;AADe,CAAlB,CAAf"}